webpackJsonp([1],{C86Z:function(e,t){},FLGu:function(e,t){},NHnr:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("7+uW"),r=s("BO1k"),i=s.n(r),a=s("mvHQ"),o=s.n(a),l={props:{name:{type:String,required:!0},label:{type:String,required:!0},required:{type:Boolean,default:!1},type:{type:String,default:"text",validator:function(e){return["text","number"].includes(e)}},options:{type:Array,default:null}},computed:{tag:function(){return this.options?"select":"input"}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form-group"},[s("label",{attrs:{for:e.name}},[e._v(e._s(e.label))]),e._v(" "),s(e.tag,{tag:"component",attrs:{name:e.name,required:e.required}},["select"===e.tag?s("option",{attrs:{value:""}},[e._v("Выберите "+e._s(e.label))]):e._e(),e._v(" "),e._l(e.options,function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name+" - "+t.id))])})],2)],1)},staticRenderFns:[]},c={components:{FormGroup:s("VU/8")(l,u,!1,null,null,null).exports},props:{users:{type:Array,required:!0}},computed:{getUsersWithOptions:function(){var e=[];return this.users.forEach(function(t){!function t(s){e.push(s),s.children&&s.children.forEach(function(e){t(e)})}(t)}),e}},methods:{submitForm:function(){var e=new FormData(this.$el),t=e.get("parent"),s={name:e.get("name"),tel:e.get("tel"),parentId:t||null,id:this.generateUserId(),children:[]};t?this.findUserById(t).children.push(s):this.users.push(s);localStorage.setItem("users",o()(this.users))},generateUserId:function(){var e=void 0;do{e=Math.floor(1e5*Math.random()).toString().padStart(5,"0")}while(this.users.some(function(t){return t.id===e}));return e},findUserById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.users,s=!0,n=!1,r=void 0;try{for(var a,o=i()(t);!(s=(a=o.next()).done);s=!0){var l=a.value;if(l.id===e)return l;if(l.children){var u=this.findUserById(e,l.children);if(u)return u}}}catch(e){n=!0,r=e}finally{try{!s&&o.return&&o.return()}finally{if(n)throw r}}return null}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.submitForm()}}},[s("form-group",{attrs:{name:"name",label:"Имя",required:""}}),e._v(" "),s("form-group",{attrs:{name:"tel",label:"Телефон",type:"number",required:""}}),e._v(" "),s("form-group",{attrs:{name:"parent",label:"Родитель",options:e.getUsersWithOptions}}),e._v(" "),s("button",{attrs:{type:"submit"}},[e._v("Сохранить")])],1)},staticRenderFns:[]};var p=s("VU/8")(c,d,!1,function(e){s("xNnl")},"data-v-a60fdb7a",null).exports,f={props:{users:{type:Array,required:!0}},components:{FormComponent:p},methods:{closeModal:function(){this.$emit("closeModal")}}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal"},[s("div",{staticClass:"modal-overlay"}),e._v(" "),s("div",{staticClass:"modal-container"},[s("div",{staticClass:"modal-header"},[s("h3",[e._v("Новый пользователь")]),e._v(" "),s("button",{staticClass:"modal-close-button",on:{click:function(t){return e.closeModal()}}},[e._v("\n        ×\n      ")])]),e._v(" "),s("div",{staticClass:"modal-body"},[s("form-component",{attrs:{users:e.users}})],1)])])},staticRenderFns:[]};var h=s("VU/8")(f,v,!1,function(e){s("FLGu")},"data-v-0750b699",null).exports,m={name:"UserList",props:{users:{type:Array,required:!0},openIds:{type:Array,default:function(){return[]}}},methods:{hasChildren:function(e){return e.children&&e.children.length},isOpen:function(e){return this.openIds.includes(e)},isTopLevel:function(e){return null===this.deepCloneObject(e).parentId},toggleOpen:function(e){this.isOpen(e)?this.openIds.splice(this.openIds.indexOf(e),1):this.openIds.push(e)},deepCloneObject:function(e){return JSON.parse(o()(e))}}},_={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-list"},e._l(e.users,function(t){return s("div",{key:t.id,staticClass:"user",style:{paddingLeft:e.isTopLevel(t)?"0":"2rem"}},[s("ul",{staticClass:"user-info"},[s("li",{staticClass:"user-info-item"},[e._v(e._s(t.id))]),e._v(" "),s("li",{staticClass:"user-info-item"},[e._v(e._s(t.name))]),e._v(" "),s("li",{staticClass:"user-info-item"},[e._v(e._s(t.tel))]),e._v(" "),s("li",{staticClass:"user-info-item"},[e._v(e._s(t.parentId))]),e._v(" "),s("li",{staticClass:"user-info-item",on:{click:function(s){return e.toggleOpen(t.id)}}},[e.hasChildren(t)?s("span",{staticClass:"user-dropdown-btn"},[e._v("\n          "+e._s(e.isOpen(t.id)?"-":"+")+"\n        ")]):e._e()])]),e._v(" "),e.isOpen(t.id)?s("div",{staticClass:"user-children"},[s("UserList",{attrs:{users:t.children,"open-ids":e.openIds}})],1):e._e()])}),0)},staticRenderFns:[]};var C={components:{UserFormModal:h,UserList:s("VU/8")(m,_,!1,function(e){s("C86Z")},"data-v-6887538a",null).exports},data:function(){return{users:[],showModal:!1}},mounted:function(){var e=localStorage.getItem("users");e&&(this.users=JSON.parse(e))},methods:{closeModal:function(){this.showModal=!this.showModal}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.showModal?s("UserFormModal",{attrs:{users:e.users},on:{closeModal:e.closeModal}}):e._e(),e._v(" "),s("button",{staticClass:"addUserBtn",on:{click:function(t){e.showModal=!0}}},[e._v("Добавить пользователя")]),e._v(" "),s("div",{staticClass:"table"},[e._m(0),e._v(" "),s("div",{staticClass:"userlist-row"},[s("UserList",{attrs:{users:e.users}})],1)])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"header-row"},[t("span",{staticClass:"header-cell"},[this._v("ID")]),this._v(" "),t("span",{staticClass:"header-cell"},[this._v("Имя")]),this._v(" "),t("span",{staticClass:"header-cell"},[this._v("Телефон")]),this._v(" "),t("span",{staticClass:"header-cell"},[this._v("ID Родителя")])])}]};var y=s("VU/8")(C,g,!1,function(e){s("cl6o")},"data-v-489ea8ad",null).exports,b=(s("vdop"),{name:"App",components:{UserManagementTable:y}}),U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("UserManagementTable")],1)},staticRenderFns:[]};var I=s("VU/8")(b,U,!1,function(e){s("wG8J")},null,null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:I},template:"<App/>"})},cl6o:function(e,t){},vdop:function(e,t){},wG8J:function(e,t){},xNnl:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bc27044e3b36d9dd1d35.js.map